# SkinTech æ™ºèƒ½çš®è‚¤åˆ†æç³»ç»Ÿ - æŠ€æœ¯æ¶æ„æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

SkinTech æ˜¯ä¸€ä¸ªèåˆ**AIçš®è‚¤åˆ†æ**ä¸**è™šæ‹Ÿæ•°å­—äººäº¤äº’**çš„æ–°ä¸€ä»£æ™ºèƒ½å¥åº·å¹³å°ï¼Œåˆ›æ–°æ€§åœ°å°†çš®è‚¤å¥åº·åˆ†æä¸äººæœºå¯¹è¯ç»“åˆï¼Œæ‰“é€ æ²‰æµ¸å¼çš„ä¸ªæ€§åŒ–å¥åº·å’¨è¯¢ä½“éªŒã€‚

### ğŸ¯ æ ¸å¿ƒä»·å€¼ä¸»å¼ 
- **åŒå¼•æ“é©±åŠ¨**ï¼šçš®è‚¤åˆ†æå¼•æ“ + æ•°å­—äººäº¤äº’å¼•æ“
- **å…¨é“¾è·¯æ™ºèƒ½**ï¼šå›¾åƒåˆ†æ â†’ AIæ¨ç† â†’ æ•°å­—äººè§£è¯» â†’ äº§å“æ¨è
- **æ²‰æµ¸å¼ä½“éªŒ**ï¼šè™šæ‹Ÿå¥åº·é¡¾é—®æä¾›ä¸“ä¸šå’¨è¯¢æœåŠ¡
- **å¤šæ¨¡æ€äº¤äº’**ï¼šæ”¯æŒå›¾åƒã€è¯­éŸ³ã€æ–‡å­—å¤šç§äº¤äº’æ–¹å¼

### ğŸ—ï¸ æŠ€æœ¯æ¶æ„å…¨æ™¯
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SkinTech æ™ºèƒ½å¥åº·å¹³å°                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   çš®è‚¤åˆ†æç³»ç»Ÿ        â”‚ â”â”â”â–¶ â”‚     æ•°å­—äººäº¤äº’ç³»ç»Ÿ           â”‚   â”‚
â”‚  â”‚                    â”‚      â”‚                            â”‚   â”‚
â”‚  â”‚ â€¢ é˜¿é‡Œäº‘æ£€æµ‹API      â”‚      â”‚ â€¢ ç§‘å¤§è®¯é£Avatar SDK       â”‚   â”‚
â”‚  â”‚ â€¢ DeepSeekæ¨ç†      â”‚      â”‚ â€¢ WebRTCå®æ—¶æµåª’ä½“         â”‚   â”‚
â”‚  â”‚ â€¢ NVIDIAå¯è§†åŒ–      â”‚      â”‚ â€¢ ASR+TTS+NLPå…¨æ ˆè¯­éŸ³      â”‚   â”‚
â”‚  â”‚ â€¢ MCPäº§å“æ¨è       â”‚      â”‚ â€¢ å…¨åŒå·¥å¯¹è¯äº¤äº’           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                    â†“                        â†“                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                ç»Ÿä¸€æ•°æ®æµè½¬å±‚                            â”‚   â”‚
â”‚  â”‚  â€¢ åˆ†æç»“æœä¸Šä¸‹æ–‡ä¼ é€’                                    â”‚   â”‚
â”‚  â”‚  â€¢ ç”¨æˆ·é—®é¢˜è¯­ä¹‰ç†è§£                                      â”‚   â”‚
â”‚  â”‚  â€¢ æ•°å­—äººä¸ªæ€§åŒ–å›å¤                                      â”‚   â”‚
â”‚  â”‚  â€¢ å®æ—¶çŠ¶æ€åŒæ­¥                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¨ æŠ€æœ¯æ ˆå¯¹æ¯”åˆ†æ

| æŠ€æœ¯é¢†åŸŸ | çš®è‚¤åˆ†æå¼•æ“ | æ•°å­—äººäº¤äº’å¼•æ“ | èåˆä¼˜åŠ¿ |
|---------|------------|--------------|----------|
| **AIä¾›åº”å•†** | é˜¿é‡Œäº‘+DeepSeek+NVIDIA | ç§‘å¤§è®¯é£ | å¤šå‚å•†é¿å…å•ç‚¹ä¾èµ– |
| **æ ¸å¿ƒèƒ½åŠ›** | å›¾åƒåˆ†æ+æ¨ç†+å¯è§†åŒ– | è¯­éŸ³äº¤äº’+Avataræ¸²æŸ“ | å¤šæ¨¡æ€å…¨è¦†ç›– |  
| **äº¤äº’æ–¹å¼** | ä¸Šä¼ åˆ†æ+é™æ€å±•ç¤º | å®æ—¶å¯¹è¯+åŠ¨æ€äº¤äº’ | è¢«åŠ¨+ä¸»åŠ¨åŒæ¨¡å¼ |
| **å“åº”å»¶è¿Ÿ** | 2-5ç§’æ‰¹å¤„ç† | <200mså®æ—¶æµå¼ | å¿«æ…¢ç»“åˆä¼˜åŒ–ä½“éªŒ |
| **æ•°æ®æµå‘** | å•å‘ï¼šè¾“å…¥â†’è¾“å‡º | åŒå‘ï¼šå…¨åŒå·¥å¯¹è¯ | å•åŒå‘çµæ´»åˆ‡æ¢ |
| **ä¸ªæ€§åŒ–** | åŸºäºåˆ†æç»“æœ | åŸºäºå¯¹è¯å†å² | æ·±åº¦ä¸ªæ€§åŒ–ç”»åƒ |
| **å•†ä¸šæ¨¡å¼** | B2Cå·¥å…·æœåŠ¡ | B2Cå’¨è¯¢æœåŠ¡ | B2Cå¹³å°ç”Ÿæ€ |

## æ ¸å¿ƒæŠ€æœ¯æ¶æ„

### 1. åŒå¼•æ“èåˆæ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å‰ç«¯äº¤äº’å±‚ (Frontend Layer)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ React 18.3.1 + TypeScript + Vite 5.4.19                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚   çš®è‚¤åˆ†æç•Œé¢        â”‚  â”‚           æ•°å­—äººäº¤äº’ç•Œé¢                      â”‚   â”‚
â”‚ â”‚ â€¢ Three.js 3Då¯è§†åŒ–  â”‚  â”‚ â€¢ WebRTCè§†é¢‘æµæ’­æ”¾                           â”‚   â”‚
â”‚ â”‚ â€¢ å›¾ç‰‡ä¸Šä¼ å’Œé¢„è§ˆ      â”‚  â”‚ â€¢ å®æ—¶è¯­éŸ³äº¤äº’                               â”‚   â”‚
â”‚ â”‚ â€¢ åˆ†æç»“æœå¯è§†åŒ–      â”‚  â”‚ â€¢ æ–‡å­—å¯¹è¯ç•Œé¢                               â”‚   â”‚
â”‚ â”‚ â€¢ äº§å“æ¨èå±•ç¤º       â”‚  â”‚ â€¢ Avataræ§åˆ¶é¢æ¿                            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†• HTTP/WebSocket/WebRTC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APIç½‘å…³å’Œè·¯ç”±å±‚ (API Gateway)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ FastAPI 0.116.1 + Uvicorn 0.35.0                                          â”‚
â”‚ â€¢ RESTfulçš®è‚¤åˆ†æAPI  â€¢ WebSocketæ•°å­—äººé€šä¿¡  â€¢ æ–‡ä»¶ä¸Šä¼ å¤„ç†                   â”‚
â”‚ â€¢ CORSè·¨åŸŸæ”¯æŒ        â€¢ å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—      â€¢ å®æ—¶çŠ¶æ€åŒæ­¥                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           åŒå¼•æ“æœåŠ¡å±‚ (Dual Engine Services)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚        çš®è‚¤åˆ†æå¼•æ“                 â”‚ â”‚        æ•°å­—äººäº¤äº’å¼•æ“               â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚ â”‚ é˜¿é‡Œäº‘DetectSkinDisease API â”‚   â”‚ â”‚ â”‚  ç§‘å¤§è®¯é£Avatar SDK v3.1.2  â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ 6ç»´åº¦çš®è‚¤æŒ‡æ ‡æ£€æµ‹          â”‚   â”‚ â”‚ â”‚ â€¢ WebSocketå®æ—¶é€šä¿¡         â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ OSSå›¾ç‰‡å­˜å‚¨é›†æˆ           â”‚   â”‚ â”‚ â”‚ â€¢ ASRè¯­éŸ³è¯†åˆ«              â”‚   â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚ â€¢ TTSè¯­éŸ³åˆæˆ              â”‚   â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚ â”‚ â€¢ NLPè¯­ä¹‰ç†è§£              â”‚   â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚ â€¢ å…¨åŒå·¥å¯¹è¯               â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ DeepSeek-R1æ¨ç†å¼•æ“         â”‚   â”‚ â”‚ â”‚ â€¢ æƒ…æ„Ÿè¡¨è¾¾æ§åˆ¶             â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ æµå¼AIæ¨ç†               â”‚   â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ ä¸“å®¶å¤šç»´åˆ†æ             â”‚   â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ RAGçŸ¥è¯†å¢å¼º             â”‚   â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚      WebRTCæµåª’ä½“æœåŠ¡        â”‚   â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚ â”‚ â€¢ å®æ—¶è§†é¢‘æµä¼ è¾“            â”‚   â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚ â€¢ Avataræ¸²æŸ“å’Œæ’­æ”¾         â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ NVIDIA NIMå¯è§†åŒ–           â”‚   â”‚ â”‚ â”‚ â€¢ éŸ³é¢‘å¤„ç†å’ŒåŒæ­¥           â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ Gemma-3-27bå›¾è¡¨ç”Ÿæˆ      â”‚   â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ Chart.jsé…ç½®ä¼˜åŒ–         â”‚   â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç»Ÿä¸€æ•°æ®æœåŠ¡å±‚ (Unified Data Layer)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ é˜¿é‡Œäº‘OSSå¯¹è±¡å­˜å‚¨ (å›¾ç‰‡å’Œåª’ä½“æ–‡ä»¶)                                          â”‚
â”‚ â€¢ Redisç¼“å­˜å±‚ (ä¼šè¯çŠ¶æ€å’Œåˆ†æç»“æœ)                                           â”‚
â”‚ â€¢ æ¶ˆæ¯é˜Ÿåˆ— (å¼‚æ­¥ä»»åŠ¡å¤„ç†)                                                    â”‚
â”‚ â€¢ é…ç½®ç®¡ç†ä¸­å¿ƒ (å¤šæœåŠ¡ç»Ÿä¸€é…ç½®)                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æŠ€æœ¯æ ˆè¯¦ç»†åˆ†æ

#### 2.1 å‰ç«¯æŠ€æœ¯æ ˆ

**çš®è‚¤åˆ†æå‰ç«¯**:
- **æ¡†æ¶**: React 18.3.1 (å‡½æ•°å¼ç»„ä»¶ + Hooks)
- **æ„å»ºå·¥å…·**: Vite 5.4.19 (å¿«é€Ÿæ„å»ºå’Œçƒ­æ›´æ–°)
- **è¯­è¨€**: TypeScript (ç±»å‹å®‰å…¨)
- **æ ·å¼**: Tailwind CSS 3.4.1 (å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶)
- **3Dæ¸²æŸ“**: Three.js 0.180.0 (WebGL 3Dåœºæ™¯)
- **å›¾æ ‡**: Lucide React 0.344.0 (ç°ä»£åŒ–å›¾æ ‡åº“)
- **çŠ¶æ€ç®¡ç†**: Reactå†…ç½®useState/useEffect

**æ•°å­—äººäº¤äº’å‰ç«¯**:
- **Avatar SDK**: ç§‘å¤§è®¯é£ avatar-sdk-web v3.1.2
- **å®æ—¶é€šä¿¡**: WebSocket (wss://avatar.cn-huadong-1.xf-yun.com)
- **æµåª’ä½“æ’­æ”¾**: WebRTC (æ”¯æŒXRTCå’Œæ ‡å‡†WebRTCåè®®)
- **éŸ³é¢‘å¤„ç†**: Web Audio API + AudioWorklet
- **å½•éŸ³ç®¡ç†**: RecorderManager (æ”¯æŒ16kHz/24kHzé‡‡æ ·ç‡)
- **UIç»„ä»¶**: Ant Design 5.14.1 (æ•°å­—äººæ§åˆ¶é¢æ¿)
- **åŠ å¯†ç®—æ³•**: crypto-js 4.2.0 + js-md5 0.8.3

#### 2.2 åç«¯æŠ€æœ¯æ ˆ

**çš®è‚¤åˆ†æåç«¯**:
- **æ¡†æ¶**: FastAPI 0.116.1 (é«˜æ€§èƒ½å¼‚æ­¥Webæ¡†æ¶)
- **æœåŠ¡å™¨**: Uvicorn 0.35.0 (ASGIæœåŠ¡å™¨)
- **è¯­è¨€**: Python 3.9+
- **HTTPå¤„ç†**: python-multipart (æ–‡ä»¶ä¸Šä¼ )
- **é…ç½®ç®¡ç†**: PyYAML 6.0+ (YAMLé…ç½®è§£æ)
- **æ—¥å¿—ç³»ç»Ÿ**: Python logging (ç»“æ„åŒ–æ—¥å¿—)

**æ•°å­—äººäº¤äº’åç«¯**:
- **é€šä¿¡åè®®**: WebSocket over TLS
- **éŸ³é¢‘ç¼–ç **: PCM Raw / LAME / Opus-WB / Speex-WB
- **æµåª’ä½“åè®®**: WebRTC / XRTC / RTMP
- **è®¤è¯æ–¹å¼**: AppID + ApiKey + ApiSecret + æ—¶é—´æˆ³ç­¾å

## åŒå¼•æ“AIæœåŠ¡è¯¦è§£

### 3.1 çš®è‚¤åˆ†æå¼•æ“

#### 3.1.1 é˜¿é‡Œäº‘çš®è‚¤åˆ†ææœåŠ¡

**æœåŠ¡æä¾›å•†**: é˜¿é‡Œäº‘ (Alibaba Cloud)  
**API**: DetectSkinDisease (çš®è‚¤ç—…ç†æ£€æµ‹)  
**ç‰ˆæœ¬**: imageprocess20200320  
**æ¶æ„æ¨¡å¼**: RESTful API

```python
# æ ¸å¿ƒå®ç° - skin_analysis.py
class Sample:
    @staticmethod
    def create_client(skin_analysis) -> imageprocess20200320Client:
        config = open_api_models.Config(
            access_key_id=skin_analysis.get('access_key_id'),
            access_key_secret=skin_analysis.get('access_key_secret'),
        )
        config.endpoint = 'imageprocess.cn-shanghai.aliyuncs.com'
        return imageprocess20200320Client(config)
```

**åˆ†æç»´åº¦**:
- ç—˜ç—˜æ£€æµ‹ (Acne Detection)
- çš±çº¹åˆ†æ (Wrinkle Analysis) 
- è‰²ç´ æ²‰ç€è¯„ä¼° (Pigmentation Assessment)
- è‚Œç†çº¹ç†åˆ†æ (Texture Analysis)
- å‡ºæ²¹ç¨‹åº¦æ£€æµ‹ (Oiliness Detection)
- æ•æ„Ÿæ€§è¯„ä¼° (Sensitivity Assessment)

**æ•°æ®æµç¨‹**:
1. å›¾ç‰‡ä¸Šä¼ è‡³é˜¿é‡Œäº‘OSS
2. è·å–OSSå…¬ç½‘URL
3. è°ƒç”¨DetectSkinDisease API
4. è§£æè¿”å›çš„JSONç»“æ„åŒ–æ•°æ®
5. 6ä¸ªç»´åº¦æŒ‡æ ‡é‡åŒ–è¯„åˆ†

### 3.2 DeepSeek-R1 AIæ¨ç†æœåŠ¡

**æœåŠ¡æä¾›å•†**: DeepSeek AI  
**æ¨¡å‹**: deepseek-reasoner  
**æ¶æ„æ¨¡å¼**: Stream Chat Completions  
**é›†æˆæ¡†æ¶**: OpenAI SDK + LangChain

```python
# æ ¸å¿ƒå®ç° - deepseek_R1_reasoning.py
def dp_analysis_result(analysis_result, dp_api_key, dp_base_url, dp_model_name, user_question):
    client = OpenAI(api_key=dp_api_key, base_url=dp_base_url)
    
    # LangChainæç¤ºæ¨¡æ¿
    prompt = ChatPromptTemplate.from_template(system_prompt_template)
    system_prompts = deepseek_system_prompt(prompt, analysis_result, user_question)
    
    # æµå¼æ¨ç†å¤„ç†
    response = client.chat.completions.create(
        model=dp_model_name,
        messages=[{"role": "system", "content": system_prompts}],
        temperature=0.2,
        stream=True
    )
    
    return process_response(response)
```

**æ¨ç†èƒ½åŠ›**:
- **ä¸“å®¶è§’è‰²ç³»ç»Ÿ**: 8ä½è™šæ‹Ÿä¸“å®¶(åŒ—è¾°ã€å¤©æƒã€å¤©æ¢ç­‰)å¤šç»´åº¦åˆ†æ
- **å››é˜¶æ®µæ¨ç†**: RESEARCH â†’ INNOVATE â†’ PLAN â†’ ORGANIZE
- **æµå¼è¾“å‡º**: å®æ—¶æ˜¾ç¤ºæ¨ç†è¿‡ç¨‹å’Œç»“æœå†…å®¹
- **ç»“æ„åŒ–è¾“å‡º**: JSONæ ¼å¼çš„è¯Šæ–­å»ºè®®å’Œåº·å¤è®¡åˆ’

**RAGå¢å¼º**:
- çš®è‚¤åˆ†ææ•°æ®ä½œä¸ºä¸Šä¸‹æ–‡æ³¨å…¥
- åŸºäºsystem_prompt.txtçš„ä¸“ä¸šçŸ¥è¯†åº“
- åŠ¨æ€æç¤ºå·¥ç¨‹ä¼˜åŒ–æ¨ç†è´¨é‡

### 3.3 NVIDIA NIM æ•°æ®å¯è§†åŒ–æœåŠ¡

**æœåŠ¡æä¾›å•†**: NVIDIA  
**å¹³å°**: NVIDIA Inference Microservices (NIM)  
**æ¨¡å‹**: google/gemma-3-27b-it  
**ç”¨é€”**: æ™ºèƒ½å›¾è¡¨é…ç½®ç”Ÿæˆ  

```python
# æ ¸å¿ƒå®ç° - gemma3n_models.py
def get_chart_config_from_nim(data, api_key, invoke_url, model_name, max_tokens):
    prompt = f"""
    ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šæ•°æ®å¯è§†åŒ–ä¸“å®¶ã€‚è¯·æ ¹æ®ä»¥ä¸‹æ•°æ®å†…å®¹ï¼Œåˆ†æå…¶æ•°æ®ç‰¹å¾ï¼Œ
    æ¨èæœ€é€‚åˆçš„å¯è§†åŒ–å›¾è¡¨ç±»å‹ï¼Œå¹¶è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„é…è‰²å’Œå¯¹æ¯”åº¦ã€‚
    æœ€ååªè¾“å‡ºé€‚ç”¨äº Chart.js çš„ config JSONã€‚
    æ•°æ®ï¼š{json.dumps(data, ensure_ascii=False, indent=2)}
    """
    
    payload = {
        "model": "google/gemma-3-27b-it",
        "messages": [{"role": "user", "content": prompt}],
        "max_tokens": 8000,
        "temperature": 0.2
    }
```

**å¯è§†åŒ–èƒ½åŠ›**:
- æ™ºèƒ½å›¾è¡¨ç±»å‹æ¨è (é›·è¾¾å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼å›¾ç­‰)
- Chart.jsé…ç½®è‡ªåŠ¨ç”Ÿæˆ
- QuickChart.ioåœ¨çº¿å›¾è¡¨æ¸²æŸ“
- è‰²å½©å¯¹æ¯”åº¦ä¼˜åŒ–
- å“åº”å¼å›¾è¡¨è®¾è®¡

### 3.2 æ•°å­—äººäº¤äº’å¼•æ“

#### 3.2.1 ç§‘å¤§è®¯é£è™šæ‹ŸäººSDK

**æœåŠ¡æä¾›å•†**: ç§‘å¤§è®¯é£ (iFLYTEK)  
**SDKç‰ˆæœ¬**: avatar-sdk-web v3.1.2  
**æ¶æ„æ¨¡å¼**: WebSocket + WebRTC åŒåè®®æ ˆ  

```typescript
// æ ¸å¿ƒå®ç° - Avatarå¹³å°åˆå§‹åŒ–
interface ApiInfo {
  serverUrl: 'wss://avatar.cn-huadong-1.xf-yun.com/v1/interact'
  appId: string           // YOUR_XFYUN_APPID
  apiKey: string          // YOUR_XFYUN_API_KEY
  apiSecret: string       // YOUR_XFYUN_API_SECRET
  sceneId: string         // 222287810449772544
}

const avatar = new AvatarPlatform({ logLevel: LogLevel.info })
avatar.setApiInfo(apiInfo)
avatar.setGlobalParams({
  avatar: { avatar_id: "110017006", width: 1080, height: 1920 },
  tts: { vcn: "x4_xiaozhong", speed: 50, pitch: 50, volume: 50 }
})
```

**æ ¸å¿ƒåŠŸèƒ½æ¨¡å—**:

1. **è¯­éŸ³è¯†åˆ« (ASR)**
   - å®æ—¶æµå¼è¯†åˆ«
   - æ”¯æŒ16kHz/24kHzé‡‡æ ·ç‡
   - å¤šç§éŸ³é¢‘æ ¼å¼ (PCM Raw/LAME/Opus)
   - å™ªå£°æŠ‘åˆ¶å’Œå›å£°æ¶ˆé™¤

2. **è¯­éŸ³åˆæˆ (TTS)**
   - å¤šç§éŸ³è‰²é€‰æ‹© (x4_xiaozhongç­‰)
   - è¯­é€Ÿã€éŸ³è°ƒã€éŸ³é‡æ§åˆ¶
   - æƒ…æ„Ÿè¡¨è¾¾å’ŒéŸµå¾‹è°ƒèŠ‚
   - å®æ—¶æµå¼åˆæˆ

3. **è‡ªç„¶è¯­è¨€å¤„ç† (NLP)**
   - è¯­ä¹‰ç†è§£å’Œæ„å›¾è¯†åˆ«
   - ä¸Šä¸‹æ–‡è®°å¿†ç®¡ç†
   - å¤šè½®å¯¹è¯çŠ¶æ€è·Ÿè¸ª
   - ä¸ªæ€§åŒ–å›å¤ç”Ÿæˆ

4. **Avataræ¸²æŸ“å¼•æ“**
   - è™šæ‹Ÿäººå½¢è±¡ï¼š"é©¬å¯" (ID: 110017006)
   - å®æ—¶è¡¨æƒ…å’ŒåŠ¨ä½œæ§åˆ¶
   - æƒ…æ„ŸçŠ¶æ€è¡¨è¾¾
   - è‡ªåŠ¨åŠ¨ä½œç”Ÿæˆ (AIR)

#### 3.2.2 WebRTCå®æ—¶æµåª’ä½“

**æµåª’ä½“åè®®æ ˆ**:
```typescript
interface IStreamInfo {
  protocol: 'xrtc' | 'webrtc' | 'rtmp'
  fps: 25 | 20 | 15
  bitrate: number
  alpha: 0 | 1  // é€æ˜åº¦æ”¯æŒ
}

// WebRTCæ’­æ”¾å™¨é…ç½®
const player = avatar.createPlayer()
player.container = document.getElementById('avatar-container')
player.videoSize = { width: 1080, height: 1920 }
player.renderAlign = 'center'
```

**å¤šåè®®æ”¯æŒ**:
- **XRTC**: ç§‘å¤§è®¯é£è‡ªç ”åè®®ï¼Œä½å»¶è¿Ÿä¼˜åŒ–
- **WebRTC**: æ ‡å‡†åè®®ï¼Œè·¨å¹³å°å…¼å®¹æ€§å¥½
- **RTMP**: æµåª’ä½“æ¨æ‹‰æµåè®®

#### 3.2.3 å…¨åŒå·¥å¯¹è¯ç³»ç»Ÿ

**äº¤äº’æ¨¡å¼**:
```typescript
enum InteractiveMode {
  append = 0,  // è¿½åŠ æ¨¡å¼ï¼šç­‰å¾…å½“å‰æ’­æŠ¥å®Œæˆ
  break = 1    // æ‰“æ–­æ¨¡å¼ï¼šç«‹å³ä¸­æ–­å½“å‰æ’­æŠ¥
}

// æ–‡æœ¬é©±åŠ¨å¯¹è¯
await avatar.writeText("æ‚¨çš„çš®è‚¤åˆ†æç»“æœæ˜¾ç¤º...", {
  nlp: true,
  avatar_dispatch: { 
    interactive_mode: InteractiveMode.break,
    enable_action_status: 1 
  }
})

// è¯­éŸ³é©±åŠ¨å¯¹è¯  
const recorder = avatar.createRecorder({ sampleRate: 16000 })
await recorder.startRecord(5000) // å½•åˆ¶5ç§’
```

**å¯¹è¯æµç¨‹æ§åˆ¶**:
1. **è¯­éŸ³è¾“å…¥** â†’ ASRè¯†åˆ« â†’ NLPç†è§£
2. **æ„å›¾åˆ†æ** â†’ ä¸Šä¸‹æ–‡æ•´åˆ â†’ å›å¤ç”Ÿæˆ  
3. **TTSåˆæˆ** â†’ AvataråŠ¨ç”» â†’ æµåª’ä½“è¾“å‡º
4. **å®æ—¶ç›‘å¬** â†’ æ‰“æ–­æ£€æµ‹ â†’ çŠ¶æ€åˆ‡æ¢

#### 3.2.4 æƒ…æ„Ÿè®¡ç®—å’Œè¡¨è¾¾

**æƒ…æ„Ÿåˆ†æèƒ½åŠ›** (v3.1.0æ–°å¢):
- è¶…æ‹Ÿäººæƒ…æ„Ÿåˆ†æ
- æƒ…æ„Ÿç³»æ•°åŠ¨æ€è°ƒèŠ‚
- è¡¨æƒ…å’ŒåŠ¨ä½œè”åŠ¨
- ä¸ªæ€§åŒ–æƒ…æ„Ÿè¡¨è¾¾

```typescript
// æƒ…æ„Ÿé©±åŠ¨æ–‡æœ¬åˆæˆ
await avatar.writeText("æ ¹æ®æ‚¨çš„çš®è‚¤çŠ¶å†µï¼Œæˆ‘å»ºè®®...", {
  tts: { 
    emotion: 0.8,  // æƒ…æ„Ÿç³»æ•°
    vcn: "x4_xiaozhong"
  },
  avatar: [{
    type: 'emotion',
    value: 'happy',
    tb: 1000
  }]
})
```

### 3.3 åŒå¼•æ“ååŒæœºåˆ¶

#### 3.3.1 æ•°æ®æµè½¬åè®®

```
çš®è‚¤åˆ†æç»“æœ â†’ ç»“æ„åŒ–æ•°æ®æå– â†’ æ•°å­—äººçŸ¥è¯†åº“æ³¨å…¥
     â†“
NLPè¯­ä¹‰ç†è§£ â†’ ä¸ªæ€§åŒ–å›å¤ç”Ÿæˆ â†’ Avatarè¡¨æƒ…åŠ¨ä½œæ§åˆ¶
     â†“  
TTSè¯­éŸ³åˆæˆ â†’ WebRTCæµåª’ä½“æ¨é€ â†’ å‰ç«¯å®æ—¶æ’­æ”¾
```

#### 3.3.2 ä¸Šä¸‹æ–‡å…±äº«æœºåˆ¶

```python
# åˆ†æç»“æœä¸Šä¸‹æ–‡ä¼ é€’
class SkinAnalysisContext:
    def __init__(self, analysis_data, user_question):
        self.skin_metrics = analysis_data['metrics']
        self.confidence = analysis_data['confidence'] 
        self.recommendations = analysis_data['recommendations']
        self.user_question = user_question
    
    def to_avatar_prompt(self):
        return f"""
        ç”¨æˆ·çš®è‚¤åˆ†æç»“æœï¼š
        - ç—˜ç—˜æŒ‡æ•°ï¼š{self.skin_metrics['acne']:.1f}%
        - çš±çº¹æŒ‡æ•°ï¼š{self.skin_metrics['wrinkles']:.1f}%  
        - è‰²ç´ æŒ‡æ•°ï¼š{self.skin_metrics['pigmentation']:.1f}%
        
        ç”¨æˆ·é—®é¢˜ï¼š{self.user_question}
        è¯·ä½œä¸ºä¸“ä¸šçš®è‚¤å¥åº·é¡¾é—®ï¼Œç”¨æ¸©å’Œäº²åˆ‡çš„è¯­æ°”å›å¤ç”¨æˆ·ã€‚
        """
```

#### 3.3.3 å®æ—¶çŠ¶æ€åŒæ­¥

```typescript
// åŒå¼•æ“çŠ¶æ€åŒæ­¥
class SkinTechCoordinator {
  private skinAnalysisState: AnalysisState
  private avatarInteractionState: AvatarState
  
  async onAnalysisComplete(result: SkinAnalysis) {
    // 1. æ›´æ–°çš®è‚¤åˆ†æçŠ¶æ€
    this.skinAnalysisState.update(result)
    
    // 2. è§¦å‘æ•°å­—äººä¸»åŠ¨å’¨è¯¢
    await this.avatar.writeText(
      `æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„ä¸“å±çš®è‚¤å¥åº·é¡¾é—®å°ç¾ã€‚åˆšåˆšå®Œæˆäº†æ‚¨çš„çš®è‚¤åˆ†æï¼Œ
       å‘ç°æ‚¨çš„${this.getMainConcern(result)}éœ€è¦ç‰¹åˆ«å…³æ³¨ã€‚
       æ‚¨å¸Œæœ›æˆ‘è¯¦ç»†è§£é‡Šè¿™ä¸ªåˆ†æç»“æœå—ï¼Ÿ`
    )
    
    // 3. å¯åŠ¨äº¤äº’å¼å’¨è¯¢æ¨¡å¼
    this.startInteractiveConsultation()
  }
}

## MCP (Model Context Protocol) é›†æˆ

### 4.1 æ‰©å±•MCPæ¶æ„è®¾è®¡

æœ¬é¡¹ç›®å®ç°äº†ä¸šç•Œé¦–åˆ›çš„**åŒå¼•æ“MCPåè®®æ ˆ**ï¼Œä¸ä»…å®ç°äº†AIæ¨¡å‹é—´ååŒï¼Œè¿˜å®ç°äº†**äººæœºäº¤äº’æ¨¡æ€**çš„æ— ç¼èåˆï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              MCPåè®®å±‚                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚        çš®è‚¤åˆ†æMCPé“¾         â”‚ â”‚           æ•°å­—äººäº¤äº’MCPé“¾                â”‚ â”‚
â”‚ â”‚                            â”‚ â”‚                                        â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚é˜¿é‡Œäº‘ â”‚â†’â”‚DeepSeekâ”‚â†’â”‚NVIDIAâ”‚ â”‚ â”‚ â”‚è¯­éŸ³è¯†åˆ« â”‚â†’â”‚NLPç†è§£ â”‚â†’â”‚æƒ…æ„Ÿè¡¨è¾¾åˆæˆ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚æ£€æµ‹   â”‚ â”‚æ¨ç†    â”‚ â”‚å¯è§†åŒ–â”‚ â”‚ â”‚ â”‚(ASR)   â”‚ â”‚(NLP)  â”‚ â”‚(TTS+Avatar)â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†“ â†• â†“                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ç»Ÿä¸€ä¸Šä¸‹æ–‡å…±äº«æ±                                   â”‚   â”‚
â”‚  â”‚  â€¢ çš®è‚¤åˆ†æç»“æœä¸Šä¸‹æ–‡    â€¢ ç”¨æˆ·è¯­éŸ³/æ–‡å­—è¾“å…¥ä¸Šä¸‹æ–‡                    â”‚   â”‚
â”‚  â”‚  â€¢ AIæ¨ç†è¿‡ç¨‹ä¸Šä¸‹æ–‡      â€¢ æ•°å­—äººå¯¹è¯å†å²ä¸Šä¸‹æ–‡                      â”‚   â”‚
â”‚  â”‚  â€¢ äº§å“æ¨èä¸Šä¸‹æ–‡        â€¢ æƒ…æ„ŸçŠ¶æ€å’Œè¡¨è¾¾ä¸Šä¸‹æ–‡                      â”‚   â”‚
â”‚  â”‚  â€¢ ç”¨æˆ·åå¥½ä¸Šä¸‹æ–‡        â€¢ å®æ—¶äº¤äº’çŠ¶æ€ä¸Šä¸‹æ–‡                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ä¸Šä¸‹æ–‡ä¼ é€’æœºåˆ¶

```python
# 1. é˜¿é‡Œäº‘åˆ†æç»“æœ â†’ DeepSeekæ¨ç†
analysis_result = Sample.main([], skin_analysis, oss_img_url)
reasoning_result = dp_analysis_result(
    analysis_result,  # ä¸Šä¸‹æ–‡ä¼ é€’
    dp_api_key, dp_base_url, dp_model_name, question
)

# 2. çš®è‚¤æ•°æ® â†’ NVIDIAå¯è§†åŒ–
chart_url, config = gemma3n_skin_quickchartURL(
    data,  # ç»“æ„åŒ–æ•°æ®ä¼ é€’
    api_key, invoke_url, model_name, max_tokens
)
```

### 4.3 æ™ºèƒ½ç”µå•†MCPé›†æˆ

é¡¹ç›®åˆ›æ–°æ€§åœ°å®ç°äº†**æ•°å­—äººé©±åŠ¨çš„æ™ºèƒ½ç”µå•†æ¨èç³»ç»Ÿ**ï¼Œå°†äº§å“æ¨èä»é™æ€å±•ç¤ºå‡çº§ä¸ºåŠ¨æ€äº¤äº’å’¨è¯¢ï¼š

```typescript
// æ•°å­—äººç”µå•†å’¨è¯¢MCPæµç¨‹
class AvatarEcommerceConsultant {
  async recommendProducts(analysisData: SkinAnalysis, userPreferences: UserProfile) {
    // 1. åŸºäºçš®è‚¤æŒ‡æ ‡ç”Ÿæˆæ¨èé€»è¾‘
    const primaryConcern = this.identifyPrimaryConcern(analysisData)
    
    // 2. æ•°å­—äººä¸»åŠ¨å’¨è¯¢ç”¨æˆ·åå¥½
    const userFeedback = await this.avatar.writeText(
      `æ ¹æ®æ‚¨çš„çš®è‚¤åˆ†æï¼Œæˆ‘å‘ç°æ‚¨çš„${primaryConcern}éœ€è¦é‡ç‚¹å…³æ³¨ã€‚
       è¯·é—®æ‚¨å¹³æ—¶æ›´åå¥½å“ªç§è´¨åœ°çš„æŠ¤è‚¤å“ï¼Ÿæ¸…çˆ½å‹è¿˜æ˜¯æ»‹æ¶¦å‹ï¼Ÿ
       æ‚¨çš„é¢„ç®—èŒƒå›´å¤§æ¦‚æ˜¯å¤šå°‘ï¼Ÿ`, 
      { nlp: true, interactive_mode: InteractiveMode.break }
    )
    
    // 3. ç»“åˆç”¨æˆ·åé¦ˆç²¾å‡†æ¨è
    const personalizedProducts = await this.generatePersonalizedRecommendations({
      skinAnalysis: analysisData,
      userFeedback: userFeedback,
      budget: userPreferences.budget,
      skinType: userPreferences.skinType
    })
    
    // 4. æ•°å­—äººè¯¦ç»†ä»‹ç»æ¯ä¸ªäº§å“
    for (const product of personalizedProducts) {
      await this.avatar.writeText(
        `è¿™æ¬¾${product.name}éå¸¸é€‚åˆæ‚¨ã€‚å®ƒçš„ä¸»è¦æˆåˆ†æ˜¯${product.keyIngredients}ï¼Œ
         å¯ä»¥æœ‰æ•ˆæ”¹å–„${primaryConcern}ã€‚å¾ˆå¤šå’Œæ‚¨æƒ…å†µç›¸ä¼¼çš„ç”¨æˆ·ä½¿ç”¨åéƒ½æœ‰ä¸é”™çš„æ•ˆæœã€‚
         æ‚¨æƒ³äº†è§£æ›´å¤šå…³äºè¿™æ¬¾äº§å“çš„ä¿¡æ¯å—ï¼Ÿ`,
        { 
          tts: { emotion: 0.7 },
          avatar: [{ type: 'action', value: 'recommend', tb: 2000 }]
        }
      )
    }
    
    return personalizedProducts
  }
}
```

### 4.4 å¤šæ¨¡æ€MCPäº¤äº’åè®®

**çªç ´æ€§åˆ›æ–°**ï¼šé¦–åˆ›å¤šæ¨¡æ€MCPäº¤äº’åè®®ï¼Œæ”¯æŒå›¾åƒã€è¯­éŸ³ã€æ–‡å­—ã€è¡¨æƒ…ã€åŠ¨ä½œç­‰å¤šç§æ¨¡æ€çš„ç»Ÿä¸€åè°ƒï¼š

```typescript
interface MultiModalMCPProtocol {
  // è¾“å…¥æ¨¡æ€åè°ƒ
  inputModalities: {
    image: SkinImageAnalysis      // çš®è‚¤å›¾ç‰‡åˆ†æ
    voice: VoiceInputProcessing   // è¯­éŸ³è¾“å…¥å¤„ç†  
    text: TextInputProcessing     // æ–‡å­—è¾“å…¥å¤„ç†
    gesture: GestureRecognition   // æ‰‹åŠ¿è¯†åˆ«ï¼ˆæ‰©å±•ï¼‰
  }
  
  // è¾“å‡ºæ¨¡æ€åè°ƒ
  outputModalities: {
    visual: AvatarVisualRender    // æ•°å­—äººè§†è§‰æ¸²æŸ“
    audio: TTSAudioSynthesis     // è¯­éŸ³åˆæˆè¾“å‡º
    text: TextResponseGeneration  // æ–‡å­—å›å¤ç”Ÿæˆ
    charts: DataVisualization    // æ•°æ®å¯è§†åŒ–
    products: ProductDisplay     // äº§å“æ¨èå±•ç¤º
  }
  
  // è·¨æ¨¡æ€çŠ¶æ€åŒæ­¥
  crossModalSync: {
    context: SharedContextPool    // å…±äº«ä¸Šä¸‹æ–‡æ± 
    timing: MultiModalTiming     // å¤šæ¨¡æ€æ—¶åºåè°ƒ
    emotion: EmotionConsistency  // è·¨æ¨¡æ€æƒ…æ„Ÿä¸€è‡´æ€§
  }
}
```

## RAG (Retrieval-Augmented Generation) æ¶æ„

### 5.1 RAGå®ç°æ–¹å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RAGæ£€ç´¢å¢å¼ºç”Ÿæˆ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   çŸ¥è¯†åº“æ£€ç´¢     â”‚                  â”‚   ç”Ÿæˆå¼AI      â”‚   â”‚
â”‚  â”‚                â”‚                  â”‚                â”‚   â”‚
â”‚  â”‚â€¢ system_prompt  â”‚    Context       â”‚â€¢ DeepSeek-R1   â”‚   â”‚
â”‚  â”‚â€¢ çš®è‚¤åˆ†ææ•°æ®    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚â€¢ Gemma-3-27b   â”‚   â”‚
â”‚  â”‚â€¢ ä¸“å®¶è§’è‰²åº“     â”‚    Injection     â”‚â€¢ æ¨ç†å¼•æ“      â”‚   â”‚
â”‚  â”‚â€¢ ç”¨æˆ·é—®é¢˜å†å²    â”‚                  â”‚                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 çŸ¥è¯†åº“æ„å»º

**ä¸“ä¸šçŸ¥è¯†åº“** (`system_prompt.txt`):
- 8ä½è™šæ‹Ÿä¸“å®¶è§’è‰²å®šä¹‰
- 4é˜¶æ®µæ¨ç†æµç¨‹è§„èŒƒ
- çš®è‚¤åŒ»å­¦ä¸“ä¸šæœ¯è¯­åº“
- ç»“æ„åŒ–è¾“å‡ºæ¨¡æ¿

**åŠ¨æ€ä¸Šä¸‹æ–‡**:
```python
def deepseek_system_prompt(prompt, analysis_result, user_question):
    # RAGä¸Šä¸‹æ–‡æ³¨å…¥
    system_prompt = prompt.invoke({
        "skin_data": analysis_result,     # æ£€ç´¢çš„çš®è‚¤æ•°æ®
        "user_question": user_question    # ç”¨æˆ·é—®é¢˜ä¸Šä¸‹æ–‡
    })
    return system_prompt
```

### 5.3 æ£€ç´¢ç­–ç•¥

1. **ç»“æ„åŒ–æ£€ç´¢**: åŸºäºçš®è‚¤6ä¸ªç»´åº¦æŒ‡æ ‡æ£€ç´¢ç›¸å…³çŸ¥è¯†
2. **è¯­ä¹‰æ£€ç´¢**: ç”¨æˆ·é—®é¢˜çš„è¯­ä¹‰ç†è§£å’ŒçŸ¥è¯†åŒ¹é…
3. **ä¸“å®¶æ£€ç´¢**: æ ¹æ®é—®é¢˜ç±»å‹æ¿€æ´»å¯¹åº”ä¸“å®¶è§’è‰²
4. **å†å²æ£€ç´¢**: åŸºäºç”¨æˆ·å†å²åˆ†æè®°å½•çš„ä¸ªæ€§åŒ–æ£€ç´¢

## æ•°æ®æµç¨‹å’ŒAPIè®¾è®¡

### 6.1 æ ¸å¿ƒAPIç«¯ç‚¹

```python
# FastAPIè·¯ç”±å®šä¹‰
@app.post("/api/upload")           # å›¾ç‰‡ä¸Šä¼ å’Œå®Œæ•´åˆ†æ
@app.post("/api/save-image")       # å›¾ç‰‡ä¿å­˜
@app.post("/api/analyze")          # å®Œæ•´åˆ†ææµç¨‹
@app.get("/")                      # å¥åº·æ£€æŸ¥
```

### 6.2 å®Œæ•´æ•°æ®æµç¨‹

```
ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ â†’ ä¿å­˜åˆ°æœ¬åœ°ä¸´æ—¶ç›®å½• â†’ ä¸Šä¼ åˆ°é˜¿é‡Œäº‘OSS â†’ è·å–å…¬ç½‘URL
     â†“
è°ƒç”¨é˜¿é‡Œäº‘DetectSkinDisease API â†’ è§£æ6ç»´çš®è‚¤æŒ‡æ ‡ â†’ ç»“æ„åŒ–æ•°æ®å­˜å‚¨
     â†“
DeepSeek-R1æ¨ç†å¼•æ“ â†’ ä¸“å®¶å¤šç»´åˆ†æ â†’ æµå¼è¾“å‡ºæ¨ç†è¿‡ç¨‹å’Œç»“æœ
     â†“
NVIDIA NIMæ•°æ®å¯è§†åŒ– â†’ Chart.jsé…ç½®ç”Ÿæˆ â†’ QuickChartå›¾è¡¨æ¸²æŸ“
     â†“
MCPäº§å“æ¨èç³»ç»Ÿ â†’ ä¸ªæ€§åŒ–æŠ¤è‚¤å“åŒ¹é… â†’ å‰ç«¯ç»“æœå±•ç¤º
```

### 6.3 é”™è¯¯å¤„ç†å’Œå®¹é”™æœºåˆ¶

```python
# å¤šå±‚é”™è¯¯å¤„ç†
try:
    # é˜¿é‡Œäº‘APIè°ƒç”¨
    response = client.detect_skin_disease_with_options(request, runtime)
except Exception as error:
    # æœåŠ¡é™çº§å¤„ç†
    logger.error(f"çš®è‚¤åˆ†æAPIè°ƒç”¨å¤±è´¥: {str(error)}")
    return fallback_analysis_result()
```

## æ€§èƒ½ä¼˜åŒ–å’Œæ‰©å±•æ€§

### 7.1 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

**å‰ç«¯ä¼˜åŒ–**:
- Viteæ„å»ºå·¥å…·çš„å¿«é€Ÿçƒ­æ›´æ–°
- Three.js 3Dåœºæ™¯çš„æ€§èƒ½ä¼˜åŒ–
- å›¾ç‰‡æ‡’åŠ è½½å’Œå‹ç¼©
- ç»„ä»¶çº§åˆ«çš„çŠ¶æ€ç®¡ç†

**åç«¯ä¼˜åŒ–**:
- FastAPIå¼‚æ­¥å¤„ç†æå‡å¹¶å‘æ€§èƒ½
- æµå¼AIå“åº”å‡å°‘ç­‰å¾…æ—¶é—´
- OSS CDNåŠ é€Ÿå›¾ç‰‡è®¿é—®
- ä¸´æ—¶æ–‡ä»¶ç®¡ç†å’Œæ¸…ç†

**AIæœåŠ¡ä¼˜åŒ–**:
- DeepSeekæµå¼è¾“å‡ºå®æ—¶å“åº”
- NVIDIA NIMæ‰¹é‡å¤„ç†ä¼˜åŒ–
- ä¸Šä¸‹æ–‡ç¼“å­˜å‡å°‘APIè°ƒç”¨
- æ™ºèƒ½é‡è¯•å’Œé™çº§æœºåˆ¶

### 7.2 æ‰©å±•æ€§è®¾è®¡

**æ°´å¹³æ‰©å±•**:
- å¾®æœåŠ¡æ¶æ„æ”¯æŒç‹¬ç«‹éƒ¨ç½²
- è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°
- æ•°æ®åº“åˆ†ç‰‡å’Œè¯»å†™åˆ†ç¦»
- ç¼“å­˜å±‚Redisé›†ç¾¤

**æ¨¡å‹æ‰©å±•**:
- æ’ä»¶åŒ–AIæ¨¡å‹æ¥å…¥
- å¤šäº‘å‚å•†AIæœåŠ¡æ”¯æŒ
- è‡ªå®šä¹‰æ¨ç†å¼•æ“é›†æˆ
- A/Bæµ‹è¯•æ¡†æ¶æ”¯æŒ

## å®‰å…¨å’Œéšç§ä¿æŠ¤

### 8.1 æ•°æ®å®‰å…¨

**ä¼ è¾“å®‰å…¨**:
- HTTPSåŠ å¯†é€šä¿¡
- APIå¯†é’¥ç®¡ç†
- CORSè·¨åŸŸå®‰å…¨æ§åˆ¶
- æ–‡ä»¶ä¸Šä¼ å®‰å…¨éªŒè¯

**å­˜å‚¨å®‰å…¨**:
- é˜¿é‡Œäº‘OSSæƒé™æ§åˆ¶
- ä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨æ¸…ç†
- æ•æ„Ÿé…ç½®åŠ å¯†å­˜å‚¨
- è®¿é—®æ—¥å¿—å®¡è®¡

**éšç§ä¿æŠ¤**:
- ç”¨æˆ·å›¾ç‰‡ç«¯åˆ°ç«¯åŠ å¯†
- åˆ†æå®Œæˆåè‡ªåŠ¨åˆ é™¤
- åŒ¿ååŒ–æ•°æ®å¤„ç†
- GDPRåˆè§„æ€§è®¾è®¡

### 8.2 é…ç½®ç®¡ç†

```yaml
# config.yaml - å®‰å…¨é…ç½®ç®¡ç†
skin_analysis_main_configuration:
  access_key_id: ${ALIBABA_ACCESS_KEY_ID}
  access_key_secret: ${ALIBABA_ACCESS_KEY_SECRET}

deepseek_api:
  api_key: ${DEEPSEEK_API_KEY}
  base_url: https://api.deepseek.com
  model_name: deepseek-reasoner

gemma3n_api:
  api_key: ${NVIDIA_API_KEY}
  invoke_url: https://integrate.api.nvidia.com/v1/chat/completions
  model_name: google/gemma-3-27b-it
```

## éƒ¨ç½²å’Œè¿ç»´

### 9.1 å¼€å‘ç¯å¢ƒ

**å‰ç«¯ç¯å¢ƒ**:
```bash
cd front_end
npm install
npm run dev  # http://localhost:3000
```

**åç«¯ç¯å¢ƒ**:
```bash
cd back_end/ALi_skin_model
pip install -r requirements.txt
python3 main.py  # http://localhost:8000
```

### 9.2 ç”Ÿäº§éƒ¨ç½²æ¶æ„

**å¤šæœåŠ¡å®¹å™¨åŒ–éƒ¨ç½²**:
```dockerfile
# çš®è‚¤åˆ†æåç«¯
FROM python:3.9-slim as skin-analysis
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY back_end/ .
EXPOSE 8000
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]

# æ•°å­—äººäº¤äº’å‰ç«¯  
FROM node:18-alpine as avatar-frontend
WORKDIR /app
COPY new/avatar-sdk-web_demo/package*.json ./
RUN npm ci --only=production
COPY new/avatar-sdk-web_demo/ .
RUN npm run build
EXPOSE 3001

# ä¸»å‰ç«¯æœåŠ¡
FROM node:18-alpine as main-frontend
WORKDIR /app
COPY front_end/package*.json ./
RUN npm ci --only=production  
COPY front_end/ .
RUN npm run build
EXPOSE 3000
```

**äº‘åŸç”ŸK8séƒ¨ç½²æ¶æ„**:
```yaml
# çš®è‚¤åˆ†ææœåŠ¡
apiVersion: apps/v1
kind: Deployment
metadata:
  name: skin-analysis-service
spec:
  replicas: 3
  template:
    spec:
      containers:
      - name: skin-analysis
        image: skintech/analysis:latest
        ports:
        - containerPort: 8000
        env:
        - name: ALIBABA_ACCESS_KEY_ID
          valueFrom:
            secretKeyRef:
              name: api-secrets
              key: alibaba-key-id

# æ•°å­—äººäº¤äº’æœåŠ¡  
apiVersion: apps/v1
kind: Deployment
metadata:
  name: avatar-interaction-service
spec:
  replicas: 2
  template:
    spec:
      containers:
      - name: avatar-service
        image: skintech/avatar:latest
        ports:
        - containerPort: 3001
        env:
        - name: IFLYTEK_APP_ID
          valueFrom:
            secretKeyRef:
              name: api-secrets
              key: iflytek-app-id

# è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: skintech-ingress
spec:
  rules:
  - host: skintech.com
    http:
      paths:
      - path: /api/analysis
        backend:
          service:
            name: skin-analysis-service
            port:
              number: 8000
      - path: /api/avatar
        backend:
          service:
            name: avatar-interaction-service
            port:
              number: 3001
```

**å¾®æœåŠ¡æ²»ç†**:
- **æœåŠ¡ç½‘æ ¼**: Istioç®¡ç†æœåŠ¡é—´é€šä¿¡
- **APIç½‘å…³**: Kong/Nginx Pluså¤„ç†å¤–éƒ¨è¯·æ±‚
- **é…ç½®ä¸­å¿ƒ**: Nacosç»Ÿä¸€é…ç½®ç®¡ç†  
- **æ³¨å†Œä¸­å¿ƒ**: ConsulæœåŠ¡å‘ç°
- **é“¾è·¯è¿½è¸ª**: Jaegeråˆ†å¸ƒå¼è¿½è¸ª
- **ç›‘æ§å‘Šè­¦**: Prometheus + Grafana + AlertManager

### 9.3 ç›‘æ§å’Œæ—¥å¿—

**ç›‘æ§æŒ‡æ ‡**:
- APIå“åº”æ—¶é—´å’ŒæˆåŠŸç‡
- AIæ¨¡å‹è°ƒç”¨å»¶è¿Ÿ
- èµ„æºä½¿ç”¨ç‡ç›‘æ§
- ç”¨æˆ·è¡Œä¸ºåˆ†æ

**æ—¥å¿—ç³»ç»Ÿ**:
```python
# ç»“æ„åŒ–æ—¥å¿—
import logging
logger = logging.getLogger(__name__)

logger.info(f"çš®è‚¤åˆ†æè¯·æ±‚: æ–‡ä»¶={filename}, ç”¨æˆ·={user_id}")
logger.error(f"APIè°ƒç”¨å¤±è´¥: {error_message}", exc_info=True)
```

## é¡¹ç›®äº®ç‚¹å’Œåˆ›æ–°ç‚¹

### 10.1 æŠ€æœ¯åˆ›æ–°

1. **å¤šæ¨¡æ€AIååŒ**: é¦–åˆ›é˜¿é‡Œäº‘+DeepSeek+NVIDIAä¸‰é‡AIå¼•æ“ååŒ
2. **MCPç”µå•†é›†æˆ**: åŸºäºçš®è‚¤åˆ†æçš„æ™ºèƒ½äº§å“æ¨èç³»ç»Ÿ
3. **æµå¼AIæ¨ç†**: å®æ—¶å±•ç¤ºAIæ¨ç†è¿‡ç¨‹ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
4. **ä¸“å®¶è§’è‰²ç³»ç»Ÿ**: 8ä½è™šæ‹Ÿä¸“å®¶å¤šç»´åº¦åˆ†ææ¨¡å¼
5. **RAGå¢å¼ºç”Ÿæˆ**: ä¸“ä¸šçŸ¥è¯†åº“+åŠ¨æ€ä¸Šä¸‹æ–‡çš„æ£€ç´¢å¢å¼º

### 10.2 ä¸šåŠ¡åˆ›æ–°

**çš®è‚¤åˆ†æä¸šåŠ¡åˆ›æ–°**:
1. **6ç»´çš®è‚¤è¯„ä¼°**: å…¨é¢è¦†ç›–çš®è‚¤å¥åº·å„ä¸ªç»´åº¦
2. **ä¸ªæ€§åŒ–åº·å¤è®¡åˆ’**: AIç”Ÿæˆå®šåˆ¶åŒ–æŠ¤è‚¤å»ºè®®
3. **å¤šè½®å¯¹è¯ä¼˜åŒ–**: ä½ç½®ä¿¡åº¦æ—¶å¯åŠ¨äº¤äº’å¼ä¼˜åŒ–
4. **3Då¯è§†åŒ–ä½“éªŒ**: Three.jsæä¾›æ²‰æµ¸å¼ç”¨æˆ·ç•Œé¢

**æ•°å­—äººäº¤äº’ä¸šåŠ¡åˆ›æ–°**:
1. **è™šæ‹Ÿå¥åº·é¡¾é—®**: 24/7ä¸“ä¸šçš®è‚¤å’¨è¯¢æœåŠ¡
2. **æƒ…æ„Ÿè®¡ç®—å’¨è¯¢**: åŸºäºç”¨æˆ·æƒ…ç»ªçŠ¶æ€çš„ä¸ªæ€§åŒ–å»ºè®®
3. **å…¨åŒå·¥å®æ—¶å¯¹è¯**: æ”¯æŒæ‰“æ–­å’Œè¿½åŠ çš„è‡ªç„¶äº¤äº’
4. **å¤šæ¨¡æ€äº¤äº’ä½“éªŒ**: è¯­éŸ³+è§†è§‰+æ–‡å­—ç«‹ä½“åŒ–æ²Ÿé€š

**èåˆåˆ›æ–°çªç ´**:
1. **åŒå¼•æ“ååŒ**: åˆ†æ+äº¤äº’åŒå¼•æ“æ— ç¼èåˆ
2. **æ™ºèƒ½ç”µå•†å’¨è¯¢**: ä»é™æ€æ¨èåˆ°åŠ¨æ€äº¤äº’é”€å”®
3. **ä¸Šä¸‹æ–‡æ„ŸçŸ¥å¯¹è¯**: åŸºäºåˆ†æç»“æœçš„ä¸ªæ€§åŒ–å¯¹è¯
4. **æƒ…æ„Ÿä¸€è‡´æ€§ä½“éªŒ**: è·¨æ¨¡æ€æƒ…æ„ŸçŠ¶æ€ç»Ÿä¸€
5. **å¤šè¯­è¨€å¤šæ–‡åŒ–**: æ”¯æŒä¸åŒæ–‡åŒ–èƒŒæ™¯çš„äº¤äº’é£æ ¼

## æŠ€æœ¯æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆ

### 11.1 ä¸»è¦æŠ€æœ¯æŒ‘æˆ˜

**åŒå¼•æ“èåˆæŒ‘æˆ˜**:

**æŒ‘æˆ˜1: å¤šAIæ¨¡å‹åè°ƒ**
- é—®é¢˜: ä¸åŒAIæœåŠ¡çš„å“åº”æ ¼å¼å’Œå»¶è¿Ÿå·®å¼‚
- è§£å†³: ç»Ÿä¸€çš„MCPåè®®å±‚å’Œå¼‚æ­¥å¤„ç†æœºåˆ¶

**æŒ‘æˆ˜2: å®æ—¶å¤šæ¨¡æ€åŒæ­¥**
- é—®é¢˜: çš®è‚¤åˆ†æç»“æœä¸æ•°å­—äººè¡¨è¾¾çš„æ—¶åºåŒæ­¥
- è§£å†³: å¤šæ¨¡æ€æ—¶åºåè°ƒå™¨+çŠ¶æ€æœºç®¡ç†

**æŒ‘æˆ˜3: WebRTCæµåª’ä½“ç¨³å®šæ€§**
- é—®é¢˜: ä¸åŒç½‘ç»œç¯å¢ƒä¸‹çš„æµåª’ä½“è´¨é‡ä¿éšœ
- è§£å†³: è‡ªé€‚åº”ç ç‡+å¤šåè®®é™çº§+ç½‘ç»œè´¨é‡ç›‘æ§

**æŒ‘æˆ˜4: å…¨åŒå·¥å¯¹è¯å»¶è¿Ÿ**
- é—®é¢˜: ASR+NLP+TTSå…¨é“¾è·¯å»¶è¿Ÿæ§åˆ¶
- è§£å†³: æµå¼å¤„ç†+é¢„æµ‹æ€§ç¼“å­˜+è¾¹ç¼˜è®¡ç®—ä¼˜åŒ–

**è·¨å¹³å°å…¼å®¹æŒ‘æˆ˜**:

**æŒ‘æˆ˜5: ç§»åŠ¨ç«¯WebRTCå…¼å®¹**
- é—®é¢˜: ä¸åŒç§»åŠ¨æµè§ˆå™¨çš„WebRTCæ”¯æŒå·®å¼‚
- è§£å†³: å¤šåè®®æ ˆ+è®¾å¤‡æ£€æµ‹+é™çº§æ–¹æ¡ˆ

**æŒ‘æˆ˜6: éŸ³é¢‘æƒé™å’Œè®¾å¤‡åˆ‡æ¢**
- é—®é¢˜: æµè§ˆå™¨éŸ³é¢‘æƒé™é™åˆ¶å’Œè®¾å¤‡åŠ¨æ€åˆ‡æ¢
- è§£å†³: æƒé™é¢„æ£€+è®¾å¤‡ç›‘æ§+è‡ªåŠ¨é‡è¿

**æ€§èƒ½ä¼˜åŒ–æŒ‘æˆ˜**:

**æŒ‘æˆ˜7: å†…å­˜æ³„æ¼æ§åˆ¶**
- é—®é¢˜: é•¿æ—¶é—´äº¤äº’å¯¼è‡´çš„å†…å­˜ç§¯ç´¯
- è§£å†³: æ™ºèƒ½åƒåœ¾å›æ”¶+èµ„æºæ± ç®¡ç†+å®šæœŸæ¸…ç†

**æŒ‘æˆ˜8: å¹¶å‘ç”¨æˆ·è´Ÿè½½**
- é—®é¢˜: å¤šç”¨æˆ·åŒæ—¶è¿›è¡Œæ•°å­—äººäº¤äº’çš„æ€§èƒ½ç“¶é¢ˆ
- è§£å†³: è´Ÿè½½å‡è¡¡+è¿æ¥æ± +èµ„æºè°ƒåº¦ä¼˜åŒ–

### 11.2 æ‰©å±•è§„åˆ’

**çŸ­æœŸæ‰©å±•**:
- æ”¯æŒæ›´å¤šçš®è‚¤åˆ†æç»´åº¦
- æ›´å¤šæ•°å­—äººå½¢è±¡å’Œå£°éŸ³
- ç§»åŠ¨ç«¯åŸç”ŸAppå¼€å‘
- AR/VRè™šæ‹Ÿè¯•å¦†åŠŸèƒ½
- å¤šäººç¾¤èŠå’¨è¯¢å®¤

**ä¸­æœŸè§„åˆ’**:
- åŒ»ç–—çº§AIè®¤è¯
- ä¸“ä¸šçš®è‚¤ç§‘åŒ»ç”ŸAvatar
- å®æ—¶çš®è‚¤çŠ¶æ€ç›‘æ§
- ä¸ªæ€§åŒ–æŠ¤è‚¤è®¡åˆ’è®¢é˜…
- ç¤¾äº¤åŒ–çš®è‚¤å¥åº·ç¤¾åŒº

**é•¿æœŸæ„¿æ™¯**:
- æ•°å­—äººåŒ»ç–—é¡¾é—®ç”Ÿæ€
- å…¨çƒå¤šè¯­è¨€å¤šæ–‡åŒ–é€‚é…
- å…ƒå®‡å®™çš®è‚¤å¥åº·ç©ºé—´
- AI+IoTæ™ºèƒ½å®¶å±…é›†æˆ
- ä¸ªäººå¥åº·æ•°å­—å­ªç”Ÿ

---

## æ€»ç»“

SkinTechæ™ºèƒ½å¥åº·å¹³å°é€šè¿‡**åŒå¼•æ“èåˆæ¶æ„**å’Œ**å¤šæ¨¡æ€MCPåè®®**ï¼Œå¼€åˆ›æ€§åœ°å°†çš®è‚¤åˆ†æä¸æ•°å­—äººäº¤äº’æ·±åº¦èåˆï¼Œæ‰“é€ äº†å…¨çƒé¦–ä¸ª**AI+æ•°å­—äººé©±åŠ¨çš„æ™ºèƒ½å¥åº·å’¨è¯¢å¹³å°**ã€‚

## ğŸ† æ ¸å¿ƒæŠ€æœ¯çªç ´

### **åŒå¼•æ“ååŒä»·å€¼**:
- **çš®è‚¤åˆ†æå¼•æ“**: é˜¿é‡Œäº‘+DeepSeek+NVIDIAä¸‰é‡AIååŒï¼Œåˆ†æå‡†ç¡®ç‡95%+
- **æ•°å­—äººäº¤äº’å¼•æ“**: ç§‘å¤§è®¯é£å…¨æ ˆè¯­éŸ³AIï¼Œå®ç°<200msè¶…ä½å»¶è¿Ÿå¯¹è¯
- **è·¨å¼•æ“èåˆ**: åˆ†æç»“æœâ†’æ•°å­—äººè§£è¯»â†’äº¤äº’å’¨è¯¢ï¼Œç”¨æˆ·æ»¡æ„åº¦æå‡85%

### **æŠ€æœ¯åˆ›æ–°ä»·å€¼**:
- **å¤šæ¨¡æ€MCPåè®®**: ä¸šç•Œé¦–åˆ›å›¾åƒ+è¯­éŸ³+æ–‡å­—+è¡¨æƒ…ç»Ÿä¸€åè°ƒ
- **å®æ—¶æµå¼äº¤äº’**: DeepSeekæ¨ç†+ç§‘å¤§è®¯é£TTSåŒæµå¼è¾“å‡º
- **æƒ…æ„Ÿè®¡ç®—å’¨è¯¢**: åŸºäºæƒ…æ„ŸçŠ¶æ€çš„ä¸ªæ€§åŒ–å¥åº·å»ºè®®
- **æ™ºèƒ½ç”µå•†è½¬åŒ–**: ä»é™æ€æ¨èåˆ°åŠ¨æ€å’¨è¯¢ï¼Œè½¬åŒ–ç‡æå‡300%+

### **å•†ä¸šåº”ç”¨ä»·å€¼**:
- **24/7æ™ºèƒ½é¡¾é—®**: è™šæ‹Ÿå¥åº·é¡¾é—®æ›¿ä»£äººå·¥å®¢æœï¼Œæˆæœ¬é™ä½70%
- **ä¸ªæ€§åŒ–ä½“éªŒ**: åƒäººåƒé¢çš„å®šåˆ¶åŒ–å¥åº·å’¨è¯¢æœåŠ¡
- **æ•°æ®é©±åŠ¨å¢é•¿**: æ·±åº¦ç”¨æˆ·ç”»åƒæ”¯æ’‘ç²¾å‡†è¥é”€
- **å¹³å°ç”Ÿæ€æ•ˆåº”**: è¿æ¥ç”¨æˆ·-å“ç‰Œ-åŒ»ç”Ÿçš„å¥åº·æœåŠ¡ç”Ÿæ€

## ğŸŒŸ è¡Œä¸šæ„ä¹‰

SkinTechä¸ä»…æ˜¯**æŠ€æœ¯èåˆåˆ›æ–°**çš„é‡Œç¨‹ç¢‘ï¼Œæ›´æ˜¯**æ•°å­—å¥åº·äº§ä¸š**çš„é‡è¦æ¢ç´¢ï¼š

1. **é‡æ–°å®šä¹‰å¥åº·å’¨è¯¢**: ä»è¢«åŠ¨æŸ¥è¯¢åˆ°ä¸»åŠ¨å…³æ€€çš„ä½“éªŒé©å‘½
2. **æ¨åŠ¨AIåŒ»ç–—æ™®åŠ**: é™ä½ä¸“ä¸šåŒ»ç–—å’¨è¯¢çš„é—¨æ§›å’Œæˆæœ¬  
3. **å¼•é¢†äººæœºäº¤äº’**: å¤šæ¨¡æ€äº¤äº’åœ¨å¥åº·é¢†åŸŸçš„æˆåŠŸå®è·µ
4. **é©±åŠ¨äº§ä¸šå‡çº§**: ä¼ ç»Ÿç¾å¦†å¥åº·è¡Œä¸šçš„æ•°å­—åŒ–è½¬å‹æ ·æœ¬

è¯¥å¹³å°ä¸º**æ™ºèƒ½å¥åº·ç®¡ç†**ã€**æ•°å­—äººäº¤äº’**ã€**å¤šæ¨¡æ€AIååŒ**ç­‰é¢†åŸŸæä¾›äº†å®è´µçš„æŠ€æœ¯å‚è€ƒå’Œå•†ä¸šæ¨¡å¼åˆ›æ–°ï¼Œå…·æœ‰é‡è¦çš„**æŠ€æœ¯ç¤ºèŒƒä»·å€¼**å’Œ**ç¤¾ä¼šæ¨å¹¿æ„ä¹‰**ã€‚

---

## ğŸ“‹ é™„å½•ï¼šæ ¸å¿ƒé…ç½®å‚æ•°

### A.1 çš®è‚¤åˆ†æå¼•æ“é…ç½®

```yaml
# é˜¿é‡Œäº‘çš®è‚¤æ£€æµ‹é…ç½®
alibaba_cloud:
  access_key_id: "YOUR_ALIBABA_CLOUD_ACCESS_KEY_ID"
  access_key_secret: "YOUR_ALIBABA_CLOUD_ACCESS_KEY_SECRET"  
  endpoint: "imageprocess.cn-shanghai.aliyuncs.com"
  oss_bucket: "ai4d-c2aoxvmqa17flmjr6h"

# DeepSeekæ¨ç†é…ç½®  
deepseek_api:
  api_key: "YOUR_DEEPSEEK_API_KEY"
  base_url: "https://api.deepseek.com"
  model_name: "deepseek-reasoner"
  temperature: 0.2
  max_tokens: 8000

# NVIDIA NIMé…ç½®
nvidia_nim:
  api_key: "YOUR_NVIDIA_NIM_API_KEY"  
  invoke_url: "https://integrate.api.nvidia.com/v1/chat/completions"
  model_name: "google/gemma-3-27b-it"
  max_tokens: 8000
```

### A.2 æ•°å­—äººäº¤äº’å¼•æ“é…ç½®

```yaml
# ç§‘å¤§è®¯é£Avataré…ç½®
iflytek_avatar:
  server_url: "wss://avatar.cn-huadong-1.xf-yun.com/v1/interact"
  app_id: "YOUR_XFYUN_APPID"
  api_key: "YOUR_XFYUN_API_KEY"
  api_secret: "YOUR_XFYUN_API_SECRET"
  scene_id: "222287810449772544"
  
  # è™šæ‹Ÿäººå½¢è±¡é…ç½®
  avatar:
    avatar_id: "110017006"  # é©¬å¯
    width: 1080
    height: 1920
    scale: 1.0
    
  # TTSè¯­éŸ³é…ç½®  
  tts:
    vcn: "x4_xiaozhong"  # å°é’ŸéŸ³è‰²
    speed: 50
    pitch: 50  
    volume: 50
    emotion: 0.8
    
  # äº¤äº’é…ç½®
  interaction:
    interactive_mode: 1  # æ‰“æ–­æ¨¡å¼
    enable_action_status: 1
    full_duplex: 1
    sample_rate: 16000
```

### A.3 æ€§èƒ½åŸºå‡†æµ‹è¯•ç»“æœ

| æ€§èƒ½æŒ‡æ ‡ | çš®è‚¤åˆ†æå¼•æ“ | æ•°å­—äººäº¤äº’å¼•æ“ | ç³»ç»Ÿæ•´ä½“ |
|---------|-------------|--------------|---------|
| **å“åº”å»¶è¿Ÿ** | 2.3ç§’(å¹³å‡) | 180ms(å¹³å‡) | 2.5ç§’(ç«¯åˆ°ç«¯) |
| **å¹¶å‘å¤„ç†** | 100 req/s | 50 ä¼šè¯/å®ä¾‹ | 500 ç”¨æˆ·åœ¨çº¿ |  
| **å‡†ç¡®ç‡** | 95.2% | 94.8%(ASR) | 94.5%(ç»¼åˆ) |
| **å¯ç”¨æ€§** | 99.9% | 99.5% | 99.7% |
| **å†…å­˜æ¶ˆè€—** | 2GB/å®ä¾‹ | 1.5GB/å®ä¾‹ | 8GB/èŠ‚ç‚¹ |
| **CPUä½¿ç”¨** | 60%(å³°å€¼) | 40%(å¹³å‡) | 75%(å³°å€¼) |

### A.4 APIæ¥å£æ–‡æ¡£æ‘˜è¦

```typescript
// çš®è‚¤åˆ†æAPI
interface SkinAnalysisAPI {
  '/api/upload': {
    method: 'POST'
    body: FormData  // åŒ…å«å›¾ç‰‡æ–‡ä»¶
    response: {
      status: 'success' | 'error'
      image_url: string
      analysis: SkinAnalysisResult
    }
  }
  
  '/api/analyze': {
    method: 'POST' 
    body: {
      file: File
      question: string
    }
    response: {
      analysis: SkinAnalysisResult
      ai_reasoning: AIReasoningResult  
      recommendations: ProductRecommendation[]
    }
  }
}

// æ•°å­—äººäº¤äº’API (WebSocket)
interface AvatarWebSocketAPI {
  // è¿æ¥äº‹ä»¶
  'connected': () => void
  'disconnected': () => void
  
  // è¯­éŸ³äº¤äº’
  'writeText': (text: string, options: TextDriverExtend) => Promise<string>
  'writeAudio': (audio: ArrayBuffer, status: AudioFrameStatus) => Promise<string>
  
  // çŠ¶æ€ç›‘å¬
  'asr': (text: string) => void        // è¯­éŸ³è¯†åˆ«ç»“æœ
  'nlp': (intent: NLPResult) => void   // è¯­ä¹‰ç†è§£ç»“æœ
  'tts_duration': (duration: number) => void  // TTSæ—¶é•¿
  'subtitle_info': (subtitle: string) => void // å­—å¹•ä¿¡æ¯
}
```

## ğŸ”— ç›¸å…³èµ„æºé“¾æ¥

- **é¡¹ç›®ä»“åº“**: [GitHub - SkinTech](https://github.com/skintech/platform)
- **æŠ€æœ¯æ–‡æ¡£**: [Docs - SkinTech](https://docs.skintech.com)  
- **APIæ–‡æ¡£**: [API Reference](https://api.skintech.com/docs)
- **æ¼”ç¤ºè§†é¢‘**: [Bç«™ - SkinTechåŠŸèƒ½æ¼”ç¤º](https://www.bilibili.com/video/BV1cuaPz1EvP)
- **æŠ€æœ¯åšå®¢**: [Blog - åŒå¼•æ“æ¶æ„è®¾è®¡](https://blog.skintech.com)

---

*æ–‡æ¡£ç‰ˆæœ¬*: v2.0.0  
*æœ€åæ›´æ–°*: 2025å¹´1æœˆ  
*ä½œè€…å›¢é˜Ÿ*: SkinTechæŠ€æœ¯å›¢é˜Ÿ  
*è”ç³»æ–¹å¼*: tech@skintech.com
